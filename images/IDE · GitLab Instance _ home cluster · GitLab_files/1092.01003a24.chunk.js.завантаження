(this.webpackJsonp=this.webpackJsonp||[]).push([[1092,1203],{"8WR8":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var o=i("t9l/");const n=Object(o.a)("An error occurred while rendering the editor"),r=Object(o.a)("An error occurred previewing the blob")},YbnA:function(e,t,i){"use strict";i.r(t),i.d(t,"EditorMarkdownPreviewExtension",(function(){return c}));var o=i("4pZC"),n=i.n(o),r=(i("uHfJ"),i("R0RX"),i("CzEs")),s=i("8WR8"),a=i("mNEC"),l=i("BYh8"),h=i("mphk"),v=i("7dTA"),w=i("6kPI");let d=!1;class c{static get extensionName(){return"EditorMarkdownPreview"}onSetup(e,t){this.preview={el:void 0,actions:{preview:void 0,hide:void 0},shown:!1,modelChangeListener:void 0,layoutChangeListener:void 0,path:t.previewMarkdownPath,actionShowPreviewCondition:e.createContextKey("toggleLivePreview",!0),eventEmitter:new r.Emitter},this.toolbarButtons=[],this.setupPreviewAction(e),e.toolbar&&this.setupToolbar(e),this.preview.layoutChangeListener=e.onDidLayoutChange((function(){var t;if(null!==(t=e.markdownPreview)&&void 0!==t&&t.shown&&!d){const{width:t}=e.getLayoutInfo(),i=t*w.y;c.resizePreviewLayout(e,i)}})),this.preview.eventEmitter.event(this.togglePreview.bind(this,e))}onBeforeUnuse(e){this.cleanup(e);const t=this.toolbarButtons.map((function(e){return e.id}));e.toolbar&&e.toolbar.removeItems(t)}cleanup(e){this.preview.layoutChangeListener&&this.preview.layoutChangeListener.dispose(),this.preview.modelChangeListener&&this.preview.modelChangeListener.dispose(),this.preview.actions.preview.dispose(),this.preview.actions.hide.dispose(),this.preview.shown&&(this.togglePreviewPanel(e),this.togglePreviewLayout(e)),this.preview.shown=!1}static resizePreviewLayout(e,t){const{height:i}=e.getLayoutInfo();d=!0,e.layout({width:t,height:i}),window.requestAnimationFrame((function(){d=!1}))}setupToolbar(e){this.toolbarButtons=[{id:w.t,label:w.v,icon:"live-preview",selected:!1,group:w.l.settings,category:"primary",selectedLabel:w.s,onClick:function(){return e.togglePreview()},data:{qaSelector:"editor_toolbar_button"}}],e.toolbar.addItems(this.toolbarButtons)}togglePreviewLayout(e){const{width:t}=e.getLayoutInfo(),i=this.preview.shown?t/w.y:t*w.y;c.resizePreviewLayout(e,i)}togglePreviewPanel(e){const t=e.getDomNode().parentElement,{el:i}=this.preview;t.classList.toggle(w.x),"none"===i.style.display?this.fetchPreview(e):i.style.display="none"}fetchPreview(e){const{el:t}=this.preview;var i,o;(i=e.getValue(),o=this.preview.path,h.a.post(o,{text:i}).then((function(e){let{data:t}=e;return t.body}))).then((function(e){t.innerHTML=Object(l.b)(e),Object(v.a)(t.querySelectorAll(".js-syntax-highlight")),t.style.display="block"})).catch((function(){return Object(a.createAlert)(s.b)}))}setupPreviewAction(e){if(e.getAction(w.t))return;const t={keybindings:[r.KeyMod.chord(r.KeyMod.CtrlCmd|r.KeyMod.Shift|r.KeyCode.KEY_P)],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run(e){e.togglePreview()}};this.preview.actions.preview=e.addAction({...t,id:w.t,label:w.v,precondition:"toggleLivePreview"}),this.preview.actions.hide=e.addAction({...t,id:w.u,label:w.s,precondition:"!toggleLivePreview"})}togglePreview(e){var t,i,o;null!==(t=this.preview)&&void 0!==t&&t.el||(this.preview.el=function(){let{injectToEl:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=document.createElement("div");return t.classList.add(w.w),t.style.display="none",e&&e.appendChild(t),t}({injectToEl:e.getDomNode().parentElement})),this.togglePreviewLayout(e),this.togglePreviewPanel(e),this.preview.actionShowPreviewCondition.set(!this.preview.actionShowPreviewCondition.get()),null!==(i=this.preview)&&void 0!==i&&i.shown?this.preview.modelChangeListener.dispose():this.preview.modelChangeListener=e.onDidChangeModelContent(n()(this.fetchPreview.bind(this,e),w.z)),this.preview.shown=!(null!==(o=this.preview)&&void 0!==o&&o.shown),e.toolbar&&e.toolbar.updateItem(w.t,{selected:this.preview.shown})}provides(){var e=this;return{markdownPreview:this.preview,fetchPreview:function(t){return e.fetchPreview(t)},setupPreviewAction:function(t){return e.setupPreviewAction(t)},togglePreview:function(t){return e.togglePreview(t)}}}}}}]);
//# sourceMappingURL=1092.01003a24.chunk.js.map